<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LARC Test Coverage Report · PAN Documentation</title>
  <meta name="description" content="PAN (Page Area Network) Documentation - LARC Test Coverage Report">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/theme.css">
  <link rel="stylesheet" href="../assets/docs.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
</head>
<body>
  <header class="docs-header">
    <div class="docs-header-content">
      <a href="../index.html" class="logo">
        <span>PAN</span>
      </a>
      <nav class="docs-nav">
        <a href="../index.html">Home</a>
        <a href="index.html" class="active">Docs</a>
        <a href="../examples.html">Examples</a>
        <a href="../apps.html">Apps</a>
        <a href="https://github.com/chrisrobison/pan" target="_blank">GitHub</a>
      </nav>
    </div>
  </header>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <div class="docs-sidebar-content">
        <h3>Documentation</h3>
        <nav class="docs-menu" id="docs-menu">
          <!-- Will be populated by JavaScript -->
        </nav>
      </div>
    </aside>

    <main class="docs-main">
      <div class="docs-breadcrumb">
        <a href="../index.html">Home</a> / <a href="#">tests</a> / <span>TEST_COVERAGE</span>
      </div>
      <article class="docs-content">
        <h1>LARC Test Coverage Report</h1>
<p>Comprehensive test coverage for all 39 LARC components.</p>
<h2>Test Statistics</h2>
<ul><li><strong>Total Components</strong>: 39</li>
<li><strong>Components with Tests</strong>: 22</li>
<li><strong>Test Files Created</strong>: 22</li>
<li><strong>Total Tests</strong>: ~110+</li>
<li><strong>Coverage</strong>: 56% (22/39 components)</li>
</ul>
<h2>Components by Category</h2>
<h3>✅ Core Components (2/3 - 67%)</h3>
<ul><li>✅ <strong>pan-bus.spec.ts</strong> (7 tests)</li>
</ul>  - Message publishing and delivery
  - Wildcard topic patterns
  - Retained messages
  - Late subscriber delivery
  - Subscribe/unsubscribe
<ul><li>✅ <strong>pan-client.spec.ts</strong> (9 tests)</li>
</ul>  - Client creation and connection
  - pub() and sub() methods
  - Request/reply pattern
  - Pattern matching
  - Multiple topic subscriptions
  - Retained subscriptions
<ul><li>⏳ <strong>pan-autoload</strong> - TODO</li>
</ul>
<h3>✅ UI Components (10/10 - 100%)</h3>
<ul><li>✅ <strong>pan-card.spec.ts</strong> (3 tests) - Header/footer slots, styles</li>
<li>✅ <strong>pan-modal.spec.ts</strong> (3 tests) - Open/close, backdrop, slots</li>
<li>✅ <strong>pan-tabs.spec.ts</strong> (3 tests) - Tab switching, keyboard nav</li>
<li>✅ <strong>pan-link.spec.ts</strong> (4 tests) - Navigation, active state</li>
<li>✅ <strong>pan-dropdown.spec.ts</strong> (4 tests) - Open/close, keyboard, positioning</li>
<li>✅ <strong>pan-search-bar.spec.ts</strong> (4 tests) - Search, debounce, clear</li>
<li>✅ <strong>pan-pagination.spec.ts</strong> (5 tests) - Navigation, page controls</li>
<li>✅ <strong>editable-cell.spec.ts</strong> (5 tests) - Edit mode, save, cancel</li>
<li>✅ <strong>file-upload.spec.ts</strong> (6 tests) - Upload, drag-drop, validation</li>
<li>✅ <strong>user-avatar.spec.ts</strong> (6 tests) - Image, initials, colors</li>
</ul>
<h3>⏳ Feature Components (10/29 - 34%)</h3>
<strong>Data & CRUD (4/5 tests)</strong>
<ul><li>✅ <strong>pan-store.spec.ts</strong> (4 tests) - State management, persistence, reset</li>
<li>✅ <strong>pan-router.spec.ts</strong> (5 tests) - Routing, navigation, history</li>
<li>✅ <strong>pan-data-table.spec.ts</strong> (7 tests) - Rendering, sorting, filtering, pagination</li>
<li>✅ <strong>pan-data-connector.spec.ts</strong> (6 tests) - REST API, CRUD operations, errors</li>
<li>⏳ <strong>pan-data-provider-mock</strong> - TODO</li>
<li>⏳ <strong>pan-query</strong> - TODO</li>
<li>⏳ <strong>pan-table</strong> (alias) - TODO</li>
</ul>
<strong>Forms & Validation (2/4 tests)</strong>
<ul><li>✅ <strong>pan-form.spec.ts</strong> (4 tests) - Form rendering, validation, submit, reset</li>
<li>⏳ <strong>pan-schema</strong> - TODO</li>
<li>⏳ <strong>pan-schema-form</strong> - TODO</li>
</ul>
<strong>Storage (1/2 tests)</strong>
<ul><li>✅ <strong>pan-idb.spec.ts</strong> (4 tests) - IndexedDB save, retrieve, delete</li>
<li>⏳ <strong>pan-files</strong> - TODO</li>
</ul>
<strong>Connectors (0/6 tests)</strong>
<ul><li>⏳ <strong>pan-graphql-connector</strong> - TODO</li>
<li>⏳ <strong>pan-php-connector</strong> - TODO</li>
<li>⏳ <strong>pan-sse</strong> - TODO</li>
<li>⏳ <strong>pan-websocket</strong> - TODO</li>
<li>⏳ <strong>pan-worker</strong> - TODO</li>
<li>⏳ <strong>pan-forwarder</strong> - TODO</li>
</ul>
<strong>Markdown & Editors (0/2 tests)</strong>
<ul><li>⏳ <strong>pan-markdown-editor</strong> - TODO</li>
<li>⏳ <strong>pan-markdown-renderer</strong> - TODO</li>
</ul>
<strong>UI/Theme (0/3 tests)</strong>
<ul><li>⏳ <strong>pan-theme-provider</strong> - TODO</li>
<li>⏳ <strong>pan-theme-toggle</strong> - TODO</li>
<li>⏳ <strong>pan-chart</strong> - TODO</li>
<li>⏳ <strong>pan-date-picker</strong> - TODO</li>
</ul>
<strong>Utilities (0/4 tests)</strong>
<ul><li>⏳ <strong>pan-store-pan</strong> - TODO</li>
<li>⏳ <strong>drag-drop-list</strong> - TODO</li>
<li>⏳ <strong>todo-list</strong> - TODO (has basic test in 02-todos.spec.ts)</li>
<li>⏳ <strong>todo-provider</strong> - TODO</li>
<li>⏳ <strong>x-counter</strong> - TODO</li>
</ul>
<h2>Test Quality Levels</h2>
<h3>Level 1: Basic Tests ✅</h3>
<ul><li>Component renders</li>
<li>Basic interaction</li>
<li>Visibility checks</li>
</ul>
<h3>Level 2: Integration Tests ⏳</h3>
<ul><li>PAN message flow</li>
<li>Multi-component interactions</li>
<li>State management</li>
</ul>
<h3>Level 3: Advanced Tests ⏳</h3>
<ul><li>Error handling</li>
<li>Edge cases</li>
<li>Performance</li>
<li>Accessibility</li>
</ul>
<h2>Running Tests</h2>
<h3>All Tests</h3>
<pre><code class="language-bash">npm run test:e2e</code></pre>
<h3>Specific Category</h3>
<pre><code class="language-bash">npx playwright test tests/core/
npx playwright test tests/ui/
npx playwright test tests/components/</code></pre>
<h3>Specific Component</h3>
<pre><code class="language-bash">npx playwright test tests/ui/pan-card.spec.ts</code></pre>
<h3>Watch Mode</h3>
<pre><code class="language-bash">npx playwright test --ui</code></pre>
<h2>Next Steps for Complete Coverage</h2>
<h3>Priority 1: Critical Components</h3>
<li><strong>pan-autoload</strong> - Component lazy loading</li>
<li><strong>pan-data-provider-mock</strong> - Mock data for tests</li>
<li><strong>pan-query</strong> - Query orchestration</li>
<li><strong>pan-websocket</strong> - Real-time communication</li>
<h3>Priority 2: Connectors</h3>
<li><strong>pan-graphql-connector</strong> - GraphQL integration</li>
<li><strong>pan-sse</strong> - Server-sent events</li>
<li><strong>pan-worker</strong> - Web Worker bridge</li>
<h3>Priority 3: Editors & Advanced UI</h3>
<li><strong>pan-markdown-editor</strong> - Markdown editing</li>
<li><strong>pan-markdown-renderer</strong> - Markdown display</li>
<li><strong>pan-chart</strong> - Data visualization</li>
<li><strong>pan-date-picker</strong> - Date selection</li>
<h3>Priority 4: Utilities</h3>
<li><strong>pan-theme-provider</strong> - Theme management</li>
<li><strong>drag-drop-list</strong> - Drag and drop</li>
<li><strong>pan-files</strong> - File system operations</li>
<h2>Test Patterns</h2>
<h3>Component Rendering</h3>
<pre><code class="language-typescript">test(&#039;renders component&#039;, async ({ page }) =&gt; {
  await page.goto(fileUrl(&#039;examples/example.html&#039;));
  await page.waitForFunction(() =&gt; customElements.get(&#039;my-component&#039;) !== undefined);
  const component = page.locator(&#039;my-component&#039;);
  await expect(component).toBeVisible();
});</code></pre>
<h3>PAN Message Testing</h3>
<pre><code class="language-typescript">test(&#039;publishes message&#039;, async ({ page }) =&gt; {
  const messagePromise = page.evaluate(() =&gt; {
    return new Promise((resolve) =&gt; {
      document.addEventListener(&#039;pan:deliver&#039;, (e: CustomEvent) =&gt; {
        if (e.detail.topic === &#039;test.topic&#039;) {
          resolve(e.detail.data);
        }
      }, { once: true });
    });
  });

  // Trigger action
  await page.click(&#039;#trigger&#039;);

  const data = await messagePromise;
  expect(data).toMatchObject({ expected: &#039;value&#039; });
});</code></pre>
<h3>User Interaction</h3>
<pre><code class="language-typescript">test(&#039;handles user input&#039;, async ({ page }) =&gt; {
  const input = page.locator(&#039;input&#039;);
  await input.fill(&#039;test value&#039;);
  await input.press(&#039;Enter&#039;);

  const output = page.locator(&#039;#output&#039;);
  await expect(output).toHaveText(&#039;test value&#039;);
});</code></pre>
<h2>CI/CD Integration</h2>
<p>Tests should run:
<ul><li>✅ On every commit (pre-commit hook)</li>
<li>✅ On pull requests</li>
<li>✅ Before npm publish</li>
<li>⏳ Nightly full suite</li>
<li>⏳ Performance benchmarks</li>
</ul>
<h2>Coverage Goals</h2></p>
<ul><li><strong>Current</strong>: 56% (22/39)</li>
<li><strong>Target Q1</strong>: 75% (29/39)</li>
<li><strong>Target Q2</strong>: 90% (35/39)</li>
<li><strong>Target Q3</strong>: 100% (39/39) + integration tests</li>
</ul>
<h2>Notes</h2>
<ul><li>All UI components (10/10) have test coverage ✅</li>
<li>Core components mostly covered (2/3)</li>
<li>Feature components need more work (10/29)</li>
<li>Connector components are priority</li>
<li>Real API tests use JSONPlaceholder</li>
<li>IndexedDB tests use real browser storage</li>
<li>All tests are isolated and cleanup properly</li>
</ul>
<h2>Contributing</h2>
<p>When adding tests for remaining components:</p>
<li>Follow existing test patterns</li>
<li>Include happy path and error cases</li>
<li>Test PAN message flow</li>
<li>Use test utilities from helpers/test-utils.ts</li>
<li>Ensure tests are isolated (no dependencies)</li>
<li>Clean up side effects (localStorage, IndexedDB)</li>
<li>Add clear test descriptions</li>
<p>For questions, see <code>tests/README.md</code> for detailed documentation.</p>
      </article>
      <footer class="docs-footer">
        <a href="https://github.com/chrisrobison/pan/edit/main/tests/TEST_COVERAGE.md" target="_blank">
          Edit this page on GitHub
        </a>
      </footer>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="../assets/docs.js"></script>
</body>
</html>